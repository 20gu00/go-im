github.com/gorilla/websocket
golang.org/x/net/websocket官方包

对ws请求进行鉴权,要有id,类似qq_id,和token

ws心跳机制:每30秒发送一次或者距离最近一次发送30s后发送一次


ws连接维护,用户id和连接进行映射

a发送数据给b:
1.a打开ws,路径/chat?id=xxx&token=yyy
2.后端开启鉴权,建立userid-websocket的映射
3.启用goroutine,通过conn.ReadMessage等待和读取消息
4.a发送json字符串消息,里面携带了目标用户的dstid
5.如果是群发,则分解群用户id
6.后端通过ClientMap[userid]获取目的用户的conn
7.conn.WriteMessage